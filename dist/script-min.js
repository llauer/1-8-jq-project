var pokemonRepository=(function(){var repository=[];var apiUrl='https://pokeapi.co/api/v2/pokemon/?limit=151';function add(pokemon){repository.push(pokemon)}
function getAll(){return repository}
function addListItem(newPokemon){var $ul=$('ul');var $li=$('<li></li>');$ul.append($li);var $button=$('<button>'+newPokemon.name+'</button>');$li.append($button);$button.on('click',function(event){showDetails(newPokemon)})}
function loadList(){return $.ajax(apiUrl).then(function(response){response.results.forEach(function(item){var pokemon={name:item.name,detailsUrl:item.url};add(pokemon)})}).catch(function(e){console.error(e)})}
function loadDetails(item){var url=item.detailsUrl;return $.ajax(url).then(function(response){console.log(response);item.imageUrl=response.sprites.front_default;item.height=response.height;item.weight=response.weight;item.types=response.types[0].type.name}).catch(function(e){console.error(e)})}
var $modalContainer=$('#modal-container');function showModal(item){$modalContainer.empty();var modal=$('<div class="modal"></div>');var closeButtonElement=$('<button class="modal-close closeBtn">&times;</button>');closeButtonElement.on('click',hideModal);var titleElement=$('<h1>'+item.name+'</h1>');var imageElement=$('<img class="img-responsive" src='+item.imageUrl+'>');var contentElement=$('<p>'+'Height: '+item.height+'</p>');var typeElement=$('<p>'+'Type: '+item.types+'</p>');var weightElement='<p>'+'Weight: '+item.weight+'</p>';modal.append(closeButtonElement);modal.append(titleElement);modal.append(contentElement);modal.append(weightElement);modal.append(typeElement);modal.append(imageElement);$modalContainer.append(modal);$modalContainer.addClass('is-visible')}
function hideModal(){$modalContainer.removeClass('is-visible')}
window.addEventListener('keydown',e=>{if(e.key==='Escape'&&$modalContainer.hasClass('is-visible')){hideModal()}});$modalContainer.on('click',e=>{var target=e.target;if(target===$modalContainer[0]){hideModal()}});function showDetails(item){pokemonRepository.loadDetails(item).then(function(){showModal(item)})}
return{add:add,getAll:getAll,loadList:loadList,loadDetails:loadDetails,showDetails:showDetails,addListItem:addListItem,showModal:showModal,hideModal:hideModal}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(currentPokemon){pokemonRepository.addListItem(currentPokemon)})})